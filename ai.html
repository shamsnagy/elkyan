<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI - Ø³ÙˆØ§Ø¹Ø¯ Ø´Ø¨Ø§Ø¨ Ù…ØµØ±</title>
  <link rel="stylesheet" href="ai.css">
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

  <!-- âœ… Overlay -->
  <div class="overlay"></div>

  <!-- âœ… Ø§Ù„Ù‡ÙŠØ¯Ø± -->
  <header class="header">
    <div class="logo">
     
      Ø³ÙˆØ§Ø¹Ø¯ Ø´Ø¨Ø§Ø¨ Ù…ØµØ±
    </div>

    <!-- Ø²Ø±Ø§Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© -->
    <div class="menu-btn" onclick="toggleMenu()">â˜°</div>
  </header>

  <!-- Mobile Side Menu -->
  <div class="side-menu" id="sideMenu">
    <a href="kyan.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
    <a href="about.html">Ø¹Ù† Ø§Ù„ÙƒÙŠØ§Ù†</a>
    <a href="gallery.html">Ø§Ù„Ø£Ù†Ø´Ø·Ø©</a>
    <a href="ai.html">AI</a>
    <a href="contact.html">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</a>
  </div>

  <!-- âœ… Ø§Ù„ÙƒØ§Ø±Ø¯ Ø§Ù„ÙƒØ¨ÙŠØ± -->
  <main class="content">
    <section class="ai-card">
      
      <!-- Welcome -->
      <div class="welcome">
        <h2>Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ <span>ÙƒÙŠØ§Ù† Ø³ÙˆØ§Ø¹Ø¯ Ø´Ø¨Ø§Ø¨ Ù…ØµØ±</span></h2>
        <p>
          Ù†Ø­Ù† Ù‡Ù†Ø§ Ù„Ù†Ø¯Ø¹Ù…ÙƒØŒ Ù†Ù„Ù‡Ù…ÙƒØŒ ÙˆÙ†Ø³Ø§Ø¹Ø¯Ùƒ ÙÙŠ Ø¨Ù†Ø§Ø¡ Ù…Ø³ØªÙ‚Ø¨Ù„ Ø£ÙØ¶Ù„.  
          Ø§Ø®ØªØ± Ø£Ø­Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø© Ø£Ùˆ Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„ÙƒØŒ ÙˆØ³ØªØ­ØµÙ„ Ø¹Ù„Ù‰ Ø¥Ø¬Ø§Ø¨Ø§Øª ØªÙ„Ù‡Ù…Ùƒ ÙˆØªÙˆØ¬Ù‡Ùƒ Ù†Ø­Ùˆ Ø§Ù„Ù†Ø¬Ø§Ø­.
        </p>
      </div>

      <!-- Suggestions -->
      <div class="suggestions" id="suggestions">
        <button onclick="quickAsk('ğŸ¯ Ø£Ù‡Ø¯Ø§Ù Ø§Ù„ÙƒÙŠØ§Ù†')">ğŸ¯ Ø£Ù‡Ø¯Ø§Ù Ø§Ù„ÙƒÙŠØ§Ù†</button>
        <button onclick="quickAsk('ğŸ“Œ Ø£Ù†Ø´Ø·ØªÙ†Ø§')">ğŸ“Œ Ø£Ù†Ø´Ø·ØªÙ†Ø§</button>
        <button onclick="quickAsk('ğŸ† Ø¥Ù†Ø¬Ø§Ø²Ø§ØªÙ†Ø§')">ğŸ† Ø¥Ù†Ø¬Ø§Ø²Ø§ØªÙ†Ø§</button>
        <button onclick="quickAsk('ğŸ¤ ÙƒÙŠÙÙŠØ© Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…')">ğŸ¤ ÙƒÙŠÙÙŠØ© Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…</button>
        <button onclick="quickAsk('ğŸŒ Ø§Ù„Ø±Ø¤ÙŠØ© ÙˆØ§Ù„Ø±Ø³Ø§Ù„Ø©')">ğŸŒ Ø§Ù„Ø±Ø¤ÙŠØ© ÙˆØ§Ù„Ø±Ø³Ø§Ù„Ø©</button>
        <button onclick="quickAsk('ğŸš€ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„')">ğŸš€ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„</button>
      </div>

      <!-- Chat -->
      <div class="chat" id="chat"></div>

      <!-- Input -->
      <div class="chat-box">
        <input type="text" id="input" placeholder="Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ù‡Ù†Ø§..." />
        <button onclick="manualSend()">Ø¥Ø±Ø³Ø§Ù„</button>
      </div>

    </section>
  </main>

  <!-- âœ… Ø²Ø± Ø¹Ø§Ø¦Ù… -->
  <a href="kyan.html" class="floating-btn">â¬… Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>

  <!-- âœ… Ø§Ù„ÙÙˆØªØ± -->
  <footer>
    Â© 2025 Ø³ÙˆØ§Ø¹Ø¯ Ø´Ø¨Ø§Ø¨ Ù…ØµØ± - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©
  </footer>

  <!-- âœ… Script -->
  <script>
    function toggleMenu() {
        document.getElementById("sideMenu").classList.toggle("active");
    }

    const chat = document.getElementById("chat");
    const suggestions = document.getElementById("suggestions");

    function addMessage(text, sender) {
      const msg = document.createElement("div");
      msg.className = `msg ${sender}`;
      msg.innerText = text;
      chat.appendChild(msg);
      chat.scrollTop = chat.scrollHeight;
    }

    function showTyping() {
      const typing = document.createElement("div");
      typing.className = "typing";
      typing.id = "typing";
      typing.innerHTML = "<span></span><span></span><span></span>";
      chat.appendChild(typing);
    }

    function removeTyping() {
      const typing = document.getElementById("typing");
      if (typing) typing.remove();
    }

    async function sendMessage(message) {
      addMessage(message, "user");
      suggestions.style.display = "none";
      showTyping();

      try {
        const res = await fetch("http://localhost:5000/chat", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ message }),
        });

        removeTyping();

        const reader = res.body.getReader();
        const decoder = new TextDecoder();
        let botMsg = document.createElement("div");
        botMsg.className = "msg bot";
        botMsg.innerText = "";
        chat.appendChild(botMsg);

        while (true) {
          const { done, value } = await reader.read();
          if (done) break;
          const chunk = decoder.decode(value, { stream: true });

          chunk.split("\n").forEach(line => {
            if (line.trim()) {
              try {
                const json = JSON.parse(line);
                if (json.partial) {
                  botMsg.innerText += json.partial;
                }
                if (json.reply) {
                  botMsg.innerText = json.reply;
                }
              } catch (e) {
                console.error("Parse error:", e);
              }
            }
          });

          chat.scrollTop = chat.scrollHeight;
        }
      } catch (err) {
        removeTyping();
        addMessage("âš ï¸ Ø­ØµÙ„ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ.", "bot");
        console.error(err);
      }
    }

    function manualSend() {
      const input = document.getElementById("input");
      const msg = input.value.trim();
      if (msg) {
        input.value = "";
        sendMessage(msg);
      }
    }

    function quickAsk(msg) {
      sendMessage(msg);
    }

    document.getElementById("input").addEventListener("keypress", function (e) {
      if (e.key === "Enter") {
        manualSend();
      }
    });
  </script>
</body>
</html>

